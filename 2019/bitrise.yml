---
format_version: '6'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: react-native
workflows:
    Release:
        steps:
            - activate-ssh-key@4.0.3:
                  run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
            - git-clone@4.0.14: {}
            - npm@1.0.1:
                  inputs:
                      - command: install
            - ios-auto-provision@1.3.0:
                  inputs:
                      - team_id: "$TEAM_ID"
                      - configuration: ''
                      - distribution_type: app-store
                      - generate_profiles: 'yes'
            - xcode-archive@2.4.19:
                  inputs:
                      - project_path: "$BITRISE_PROJECT_PATH"
                      - scheme: "$BITRISE_SCHEME"
                      - export_method: app-store
                      - configuration: Release
            - install-missing-android-tools@2.3.4:
                  inputs:
                      - gradlew_path: "$PROJECT_LOCATION/gradlew"
            - android-build@0.9.5:
                  inputs:
                      - project_location: "$PROJECT_LOCATION"
            - deploy-to-bitrise-io@1.3.19: {}
    Testing:
        steps:
            - activate-ssh-key@4.0.3:
                  run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
            - git-clone@4.0.14: {}
            - npm@1.0.1:
                  inputs:
                      - command: install
            - ios-auto-provision@1.3.0:
                  inputs:
                      - team_id: "$TEAM_ID"
                      - configuration: ''
                      - generate_profiles: 'yes'
            - xcode-archive@2.4.19:
                  inputs:
                      - project_path: "$BITRISE_PROJECT_PATH"
                      - scheme: "$BITRISE_SCHEME"
                      - export_method: development
                      - configuration: Release
            - install-missing-android-tools@2.3.4:
                  inputs:
                      - gradlew_path: "$PROJECT_LOCATION/gradlew"
            - android-build@0.9.5:
                  inputs:
                      - project_location: "$PROJECT_LOCATION"
            - deploy-to-bitrise-io@1.3.19: {}
app:
    envs:
        - opts:
              is_expand: false
          PROJECT_LOCATION: android
        - opts:
              is_expand: false
          MODULE: app
        - opts:
              is_expand: false
          VARIANT: _
        - opts:
              is_expand: false
          BITRISE_PROJECT_PATH: ios/HelloWorld.xcodeproj
        - opts:
              is_expand: false
          BITRISE_SCHEME: HelloWorld
        - opts:
              is_expand: false
          BITRISE_EXPORT_METHOD: app-store
trigger_map:
    - push_branch: master
      workflow: Testing
    - tag: "*"
      workflow: Release
